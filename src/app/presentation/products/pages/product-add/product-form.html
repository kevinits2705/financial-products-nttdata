<div class="form-page-container">
  <button (click)="goToList()" type="button" class="return-button">« Regresar</button>
  <h2 class="form-title">Formulario de Registro</h2>
  <div class="form-divider"></div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="registration-form">
    <div class="form-row">
      <div class="form-group">
        <label for="id-input">ID</label>
        <input
          id="id-input"
          formControlName="id"
          placeholder="ID"
          [class.input-error]="form.get('id')?.invalid && form.get('id')?.touched"
        />
        <div class="error-message" *ngIf="form.get('id')?.touched && form.get('id')?.invalid">
          <span *ngIf="form.get('id')?.errors?.['required']">Este campo es requerido.</span>
          <span *ngIf="form.get('id')?.errors?.['minlength']">Mínimo 3 caracteres.</span>
          <span *ngIf="form.get('id')?.errors?.['maxlength']">Máximo 10 caracteres.</span>
          <span *ngIf="form.get('id')?.errors?.['idExists']">El ID ya existe.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="name-input">Nombre</label>
        <input
          id="name-input"
          formControlName="name"
          placeholder="Tarjeta Crédito"
          [class.input-error]="form.get('name')?.invalid && form.get('name')?.touched"
        />
        <div class="error-message" *ngIf="form.get('name')?.touched && form.get('name')?.invalid">
          <span *ngIf="form.get('name')?.errors?.['required']">Este campo es requerido.</span>
          <span *ngIf="form.get('name')?.errors?.['minlength']">Mínimo 5 caracteres.</span>
          <span *ngIf="form.get('name')?.errors?.['maxlength']">Máximo 100 caracteres.</span>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="description-input">Descripción</label>
        <input
          id="description-input"
          formControlName="description"
          placeholder="Descripción"
          [class.input-error]="form.get('description')?.invalid && form.get('description')?.touched"
        />
        <div
          class="error-message"
          *ngIf="form.get('description')?.touched && form.get('description')?.invalid"
        >
          <span *ngIf="form.get('description')?.errors?.['required']">Este campo es requerido.</span>
          <span *ngIf="form.get('description')?.errors?.['minlength']">Mínimo 10 caracteres.</span>
          <span *ngIf="form.get('description')?.errors?.['maxlength']">Máximo 200 caracteres.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="logo-input">Logo</label>
        <input
          id="logo-input"
          formControlName="logo"
          placeholder="Logo"
          [class.input-error]="form.get('logo')?.invalid && form.get('logo')?.touched"
        />
        <div class="error-message" *ngIf="form.get('logo')?.touched && form.get('logo')?.invalid">
          <span *ngIf="form.get('logo')?.errors?.['required']">Este campo es requerido.</span>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="date_release-input">Fecha Liberación</label>
        <input
          id="date_release-input"
          formControlName="date_release"
          type="date"
          [class.input-error]="form.get('date_release')?.invalid && form.get('date_release')?.touched"
        />
        <div
          class="error-message"
          *ngIf="form.get('date_release')?.touched && form.get('date_release')?.invalid"
        >
          <span *ngIf="form.get('date_release')?.errors?.['required']">Campo requerido.</span>
          <span *ngIf="form.get('date_release')?.errors?.['invalidReleaseDate']">
            Debe ser igual o mayor a la fecha actual.
          </span>
        </div>
      </div>

      <div class="form-group">
        <label for="date_revision-input">Fecha Revisión</label>
        <input
          id="date_revision-input"
          formControlName="date_revision"
          type="date"
          [class.input-error]="
            (form.get('date_revision')?.invalid && form.get('date_revision')?.touched) ||
            form.errors?.['revisionNotOneYearAfter']
          "
        />
        <div
          class="error-message"
          *ngIf="
            (form.get('date_revision')?.touched && form.get('date_revision')?.invalid) ||
            form.errors?.['revisionNotOneYearAfter']
          "
        >
          <span *ngIf="form.get('date_revision')?.errors?.['required']">Campo requerido.</span>
          <span *ngIf="form.errors?.['revisionNotOneYearAfter']"
            >Debe ser exactamente un año después de la fecha de liberación.</span
          >
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-reset" (click)="form.reset()">Reiniciar</button>

      <button type="submit" [disabled]="form.invalid" class="btn btn-submit">Enviar</button>
    </div>
  </form>
</div>
